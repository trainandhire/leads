<div class="app-content content">
    <div class="content-wrapper">
        <div class="content-header row mb-1">
            <!-- <app-breadcrumb class="col-12" [breadcrumb]="breadcrumb"></app-breadcrumb> -->
        </div>
        <div class="content-body">

            <!-- Content types section start -->
            <section id="content-types">

                <div class="row">
                    <div class="col-xl-12 col-md-12 col-sm-12">
                        <!-- Submitted mails table card -->
                        <section id="image-grid" class="card" *blockUI="'submittedMailTableCard'; message: 'Loading'">
                            <m-card [options]="options" (reloadFunction)="reloadSubmittedMailTableCard()">
                                <ng-container mCardHeaderTitle>
                                    Submitted Mails
                                </ng-container>
                                <ng-container mCardContent>
                                    <div class="card-body">
                                        <table class="table table-bordered table-responsive">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        <input [(ngModel)]="isAllFromChecked" (click)="allFromChanged();" type="checkbox" class="checkboxInTd" >
                                                        From
                                                    </th>
                                                    <th>
                                                        <input [(ngModel)]="isAllToChecked" (click)="allToChanged()" type="checkbox"  class="checkboxInTd">
                                                        To
                                                    </th>
                                                    <th>
                                                        <input  [(ngModel)]="isAllCcChecked" (click)="allCcChanged()" type="checkbox" class="checkboxInTd">
                                                        cc
                                                    </th>
                                                    <th>
                                                        <input [(ngModel)]="isAllSubjectChecked" (click)="allSubjectChanged()" type="checkbox" class="checkboxInTd">
                                                        Subject
                                                    </th>
                                                    <th>
                                                        <input [(ngModel)]="isAllSalutationChecked" (click)="allSalutationchanged()" type="checkbox" class="checkboxInTd">
                                                        salutation
                                                    </th>
                                                    <th >
                                                        <button class="btn btn-outline-primary block btn-lg" (click)="AllMailBodies(AllMailBodiesContent)">
                                                            all bodies
                                                           </button>     
                                                    </th>

                                                    <th>
                                                        <input [(ngModel)]="isAllSignatureChecked" (click)="allSignatureChanged()" type="checkbox" class="checkboxInTd">
                                                        signature
                                                    </th>
                                                    <th>
                                                        Score
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let mail of submittedMails; let i=index">
                                                    <td>
                                                        <input type="checkbox" [(ngModel)]="submittedMails[i].scores.from.isCorrect" (ngModelChange)="calculateScoreForOneMail(i)" class="checkboxInTd" >
                                                        {{mail.from}}
                                                    </td>
                                                    <td>
                                                        <input type="checkbox" [(ngModel)]="submittedMails[i].scores.to.isCorrect" (ngModelChange)="calculateScoreForOneMail(i)" class="checkboxInTd">
                                                        {{mail.to}}
                                                    </td>
                                                    <td>
                                                        <input type="checkbox" class="checkboxInTd" [(ngModel)]="submittedMails[i].scores.cc.isCorrect" (ngModelChange)="calculateScoreForOneMail(i)">
                                                        <ng-container *ngFor="let cc of mail.cc.split(',')">
                                                            {{cc}}
                                                        </ng-container>
                                                    </td>
                                                    <td>
                                                        <input type="checkbox" class="checkboxInTd" [(ngModel)]="submittedMails[i].scores.subject.isCorrect" (ngModelChange)="calculateScoreForOneMail(i)">
                                                        {{mail.subject}}
                                                    </td>
                                                    <td>
                                                        <input type="checkbox" class="checkboxInTd" [(ngModel)]="submittedMails[i].scores.salutation.isCorrect" (ngModelChange)="calculateScoreForOneMail(i)">
                                                        {{mail.salutation}}
                                                    </td>
                                                    <td>
                                                        <!-- body display model trigger button -->
                                                        <button class="btn btn-outline-primary block btn-lg" (click)="OneMailBody(OneMailBodyContent,mail.body,i)">
                                                            body
                                                        </button>
                                                    </td>
                                                    <td>
                                                        <input type="checkbox" class="checkboxInTd" [(ngModel)]="submittedMails[i].scores.signature.isCorrect" (ngModelChange)="calculateScoreForOneMail(i)">
                                                        {{mail.signature}}
                                                    </td>
                                                    <td>
                                                        {{mail.scores.total.points}}/10
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </ng-container>
                            </m-card>
                        </section>
                        <!--/Submitted mails table card  -->
                    </div>
                </div>
            </section>
            <!-- Content types section end -->

        </div>
    </div>
</div>

<!-- ////////////////////////////////////////////////////////////////////////////-->

<!-- One mail body model -->
<ng-template class="modal text-left" #OneMailBodyContent let-c="close" let-d="dismiss">
    <div class="modal-lg">
        <div class="modal-header">
            <h6 id="myModalLabel23">Mail Body</h6>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <input type="checkbox" (click)="bodyChangedForOneMail($event.target.checked)">
            <p>{{selectedBody}}</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn grey btn-outline-secondary"
                (click)="d('Close modal')">Close</button>
            <!-- <button type="button" class="btn btn-outline-primary">Save changes</button> -->
        </div>
    </div>
</ng-template>

<!-- All mails body model -->
<ng-template class="modal text-left" #AllMailBodiesContent let-c="close" let-d="dismiss">
    <div class="modal-lg">
        <div class="modal-header">
            <h6 id="myModalLabel23" >
                <input type="checkbox" [(ngModel)]="isAllBodyChecked" (click)="allBodyChanged()">&nbsp;
                All mails bodies
            </h6>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" *ngFor="let mail of submittedMails, let i=index" class="border border-1 rounded m-1 p-2">
            <input type="checkbox" [(ngModel)]="submittedMails[i].scores.body.isCorrect">
            <p>{{mail.body}}</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn grey btn-outline-secondary"
                (click)="d('Close modal')">Close</button>
            <!-- <button type="button" class="btn btn-outline-primary">Save changes</button> -->
        </div>
    </div>
</ng-template>










